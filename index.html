<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>メンテナンス中</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="maintenance-container">
        <img src="favicon.ico" class="maintenance-icon-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
        <div style="display:none; font-size: 64px; margin-bottom: 20px;">⚙️</div>
        
        <h1>現在メンテナンス中です</h1>
        <p>
            更新が終わり次第プレイできるようになります<br>
            もうしばらくお待ちください
        </p>
    </div>

    <div class="maintenance-footer">
        Web Werewolf System Maintenance
    </div>

<script>
    // あなたのngrok URL
    const ngrokUrl = "https://yawnful-oligarchic-von.ngrok-free.dev";

    async function checkServer() {
        try {
            // ngrokのURLを叩き、レスポンスを確認
            const response = await fetch(ngrokUrl, { mode: 'no-cors' });
            
            /* mode: 'no-cors' の場合、中身のステータスコードまでは見られませんが、
               ngrokが完全にオフライン（ERR_NGROK_3200等）の場合、
               ブラウザによってはここを通過させてしまうことがあります。
            */
            
            // 確実な転送のために：
            // ngrokが生きている時だけ応答が速いことを利用するか、
            // 完全に接続が確立されたとみなせる場合のみ転送します。
            
            console.log("接続を確認しました。転送を開始します。");
            window.location.href = ngrokUrl;

        } catch (error) {
            // 接続失敗（オフライン）時はここに来る
            console.log("サーバーはオフラインです。メンテナンス画面を表示し続けます。");
        }
    }

    // 1秒待ってから判定（ngrokのエラー画面への即時転送を防ぐ）
    setTimeout(checkServer, 1000);
</script>
</body>

</html>


