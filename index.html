<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>メンテナンス中</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="maintenance-container">
        <img src="favicon.ico" class="maintenance-icon-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
        <div style="display:none; font-size: 64px; margin-bottom: 20px;">⚙️</div>
        
        <h1>現在メンテナンス中です</h1>
        <p>
            更新が終わり次第プレイできるようになります<br>
            もうしばらくお待ちください
        </p>
    </div>

    <div class="maintenance-footer">
        Web Werewolf System Maintenance
    </div>

<div id="play-sector" style="display: none; margin-top: 20px;">
    <button onclick="location.href='https://yawnful-oligarchic-von.ngrok-free.dev'" 
            style="padding: 15px 30px; font-size: 18px; cursor: pointer; background: #fff; color: #000; border: none; border-radius: 5px; font-weight: bold; box-shadow: 0 4px 15px rgba(255,255,255,0.3);">
        ゲームをプレイする
    </button>
</div>

<script>
    // あなたのngrok URL
    const ngrokUrl = "https://yawnful-oligarchic-von.ngrok-free.dev";
    // ラズパイが動いている時だけ存在するファイルのパス（キャッシュ防止のランダム文字付き）
    const checkImageUrl = ngrokUrl + "/static/favicon.ico?t=" + new Date().getTime();

    function checkServer() {
        const img = new Image();
        
        // 画像が正常に読み込めた ＝ ラズパイのapp.pyが応答している
        img.onload = function() {
            document.getElementById('play-sector').style.display = 'block';
            document.querySelector('h1').innerText = "サーバー稼働中！";
        };

        // 読み込めなかった ＝ ngrokがオフライン、またはエラーページを返している
        img.onerror = function() {
            document.getElementById('play-sector').style.display = 'none';
            document.querySelector('h1').innerText = "現在メンテナンス中です";
        };

        img.src = checkImageUrl;
    }

    // 起動時と10秒おきに自動チェック
    checkServer();
    setInterval(checkServer, 10000);
</script>
</body>

</html>




