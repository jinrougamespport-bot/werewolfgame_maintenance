<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>メンテナンス中</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="maintenance-container">
        <img src="favicon.ico" class="maintenance-icon-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
        <div style="display:none; font-size: 64px; margin-bottom: 20px;">⚙️</div>
        
        <h1>現在メンテナンス中です</h1>
        <p>
            更新が終わり次第プレイできるようになります<br>
            もうしばらくお待ちください
        </p>
    </div>

    <div class="maintenance-footer">
        Web Werewolf System Maintenance
    </div>

<script>
    const ngrokUrl = "https://yawnful-oligarchic-von.ngrok-free.dev";

    // 5秒以内に返事がなければタイムアウトさせる設定
    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 5000);

    fetch(ngrokUrl, { 
        mode: 'no-cors',
        signal: controller.signal 
    })
    .then(() => {
        // ngrokが生きていれば（ここが重要）、URLをチェック
        // ただし、ngrokのエラーページを拾わないように少し工夫が必要な場合があります
        // 今回はシンプルに、成功時のみリダイレクト
        window.location.href = ngrokUrl;
    })
    .catch((error) => {
        // ngrokがオフライン（3200エラー等）なら、ここに来る
        // 何もしないことで、Renderの「メンテナンス画面」が表示され続けます
        console.log("ラズパイはオフラインです。メンテ画面を維持します。");
    });
</script>
</body>

</html>
